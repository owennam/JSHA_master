# JSHA í”„ë¡œì íŠ¸ ê°œë°œ íšŒê³ 

> ğŸ“… ìµœì¢… ì—…ë°ì´íŠ¸: 2026-01-13

---

## ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ìš”ì•½

### 1. ê´€ë¦¬ì ì¸ì¦ ì˜¤ë¥˜ (2026-01-13)

| ì˜¤ë¥˜ | ì›ì¸ | í•´ê²° |
|------|------|------|
| `net::ERR_BLOCKED_BY_CLIENT` | ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨ì´ Firestore ì—°ê²° ì°¨ë‹¨ | ì„œë²„ APIë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ |
| `auth/admin-restricted-operation` | Firebase ìµëª… ì¸ì¦ ë¹„í™œì„±í™” | `signInAnonymously` ì œê±° |
| `Missing or insufficient permissions` | Firestore ê·œì¹™ + ë¯¸ë¡œê·¸ì¸ | ê·œì¹™ ì™„í™” or ë¡œê·¸ì¸ í•„ìˆ˜ |

**í•´ê²°ì±…**: ê´€ë¦¬ì í˜ì´ì§€ëŠ” **ì„œë²„ API + JWT** ì‚¬ìš©, Firestore ì§ì ‘ ì ‘ê·¼ ì œê±°

---

### 2. í”„ë¡œë•ì…˜ ë°°í¬ ëˆ„ë½ (2026-01-13)

| ì˜¤ë¥˜ | ì›ì¸ | í•´ê²° |
|------|------|------|
| 404 Not Found (`/api/admin/recap-videos`) | Render ì„œë²„ì— ìƒˆ API ë¯¸ë°°í¬ | `git push` í›„ Render Manual Deploy |

**í•µì‹¬ êµí›ˆ**: í”„ë¡ íŠ¸ì—”ë“œ(Vercel)ì™€ ë°±ì—”ë“œ(Render) **ë‘˜ ë‹¤ ë°°í¬** í•„ìš”!

---

### 3. Firestore ì´ˆê¸°í™” ì˜¤ë¥˜ (2026-01-12)

```typescript
// âŒ ë¬¸ì œ
db = getFirestore();

// âœ… í•´ê²°
import { app } from './firebase';
db = getFirestore(app);  // app ì¸ìŠ¤í„´ìŠ¤ ëª…ì‹œì  ì „ë‹¬
```

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í”„ë¡ íŠ¸ì—”ë“œ (Vercel)                                          â”‚
â”‚  - React + TypeScript + Vite                                 â”‚
â”‚  - ì‚¬ìš©ì í˜ì´ì§€: Firebase Auth + Firestore SDK              â”‚
â”‚  - ê´€ë¦¬ì í˜ì´ì§€: ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ + ì„œë²„ API                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë°±ì—”ë“œ ì„œë²„ (Render)                                         â”‚
â”‚  - Express.js + Firebase Admin SDK                          â”‚
â”‚  - JWT ì¸ì¦ (24ì‹œê°„ ìœ íš¨)                                     â”‚
â”‚  - Firestore ê·œì¹™ ìš°íšŒ (Admin SDK)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firebase                                                    â”‚
â”‚  - Auth: ì‚¬ìš©ì ì´ë©”ì¼ ì¸ì¦                                   â”‚
â”‚  - Firestore: ë°ì´í„° ì €ì¥                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì½”ë“œ ë³€ê²½ í›„
- [ ] `npm run build` ë¡œì»¬ ë¹Œë“œ í™•ì¸
- [ ] `git add -A && git commit && git push origin master`
- [ ] Vercel ìë™ ë°°í¬ í™•ì¸ (í”„ë¡ íŠ¸ì—”ë“œ)
- [ ] Render Manual Deploy (ë°±ì—”ë“œ - í•„ìš”ì‹œ)
- [ ] `firebase deploy --only firestore:rules` (ê·œì¹™ ë³€ê²½ì‹œ)

### ìƒˆ ë¸Œë¼ìš°ì €/ê¸°ê¸°ì—ì„œ ì ‘ì† ì‹œ
- [ ] **ê´€ë¦¬ì**: `/admin/login`ì—ì„œ ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸
- [ ] **ì‚¬ìš©ì**: Firebase Auth ë¡œê·¸ì¸ í•„ìš”

---

## ğŸ” Firestore ë³´ì•ˆ ê·œì¹™ ìš”ì•½

```javascript
// recapVideos - ì½ê¸° ê³µê°œ, ì“°ê¸°ëŠ” ì„œë²„ë§Œ
allow read: if true;
allow write: if false;  // Admin SDKë¡œë§Œ ìˆ˜ì •

// recapRegistrants - ë¡œê·¸ì¸ í•„ìš”
allow read: if isSignedIn();
allow create: if isOwner(userId);
allow update: if isSignedIn();
```

---

## ğŸ¬ Vimeo ì„¤ì • ê°€ì´ë“œ

| ì„¤ì • | ê°’ | ì´ìœ  |
|------|-----|------|
| í”„ë¼ì´ë²„ì‹œ | **ìˆ¨ê¸°ê¸° (Hide from Vimeo)** | ê²€ìƒ‰ ë…¸ì¶œ ë°©ì§€ + ì„ë² ë“œ ê°€ëŠ¥ |
| ë„ë©”ì¸ ì œí•œ | `jshamaster.com` | ë‹¤ë¥¸ ì‚¬ì´íŠ¸ ì„ë² ë“œ ì°¨ë‹¨ |
| í”Œëœ | Starter (â‚©12,600/ì›”) | ë„ë©”ì¸ ì œí•œ ê¸°ëŠ¥ í•„ìš” |

**ì˜ìƒ URL í˜•ì‹**: ë¹„ë°€ í•´ì‹œ í¬í•¨ í•„ìš”
```
https://vimeo.com/123456789/abc123hash
```

---

## ğŸ“ ì£¼ìš” íŒŒì¼ ìœ„ì¹˜

| ê¸°ëŠ¥ | íŒŒì¼ |
|------|------|
| ê´€ë¦¬ì ë¼ìš°íŠ¸ | `server/routes/adminRoutes.js` |
| Firestore ê·œì¹™ | `firestore.rules` |
| í™˜ê²½ ë³€ìˆ˜ | `.env` (VITE_API_URL, JWT_SECRET ë“±) |
| ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ | `src/pages/admin/AdminDashboard.tsx` |
| ë¹„ë””ì˜¤ ê´€ë¦¬ | `src/pages/admin/AdminRecapVideosPage.tsx` |
| ë“±ë¡ì ê´€ë¦¬ | `src/pages/admin/AdminRecapPage.tsx` |

---

## âš ï¸ ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜

1. **í”„ë¡ íŠ¸ë§Œ ë°°í¬í•˜ê³  ë°±ì—”ë“œ ì•ˆ í•¨** â†’ API 404 ì˜¤ë¥˜
2. **Firestore ê·œì¹™ ë°°í¬ ì•ˆ í•¨** â†’ ê¶Œí•œ ì˜¤ë¥˜
3. **ìƒˆ ë¸Œë¼ìš°ì €ì—ì„œ ë¡œê·¸ì¸ ì•ˆ í•¨** â†’ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨
4. **`getFirestore()` í˜¸ì¶œ ì‹œ app ëˆ„ë½** â†’ ì´ˆê¸°í™” ì˜¤ë¥˜

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [Firebase Auth ì„¤ì •](https://firebase.google.com/docs/auth)
- [Firestore ë³´ì•ˆ ê·œì¹™](https://firebase.google.com/docs/firestore/security/get-started)
- [Vimeo ê°œë°œì ë¬¸ì„œ](https://developer.vimeo.com/)

---

## ğŸ“Œ TODO: ë‹¤ì‹œë³´ê¸° UI ê°œì„  (ì˜ˆì •)

### Phase 1: ìŠ¤ì¼€ì¼ë§ ë° í…ìŠ¤íŠ¸ í¬ê¸° ì¡°ì •
- [ ] ë¹„ë””ì˜¤ ì¸ë„¤ì¼ í¬ê¸° ìµœì í™” (í˜„ì¬ ë„ˆë¬´ ì‘ìŒ)
- [ ] ì œëª©/ì„¤ëª… í…ìŠ¤íŠ¸ ê°€ë…ì„± ê°œì„ 
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ì ê²€
- [ ] ë¹„ë””ì˜¤ ê·¸ë¦¬ë“œ ê°„ê²© ì¡°ì •

### Phase 2: ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- [ ] ë¹„ë””ì˜¤ ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤ UI ì¶”ê°€
- [ ] ì¬ìƒ ì§„í–‰ë¥  í‘œì‹œ
- [ ] ë§ˆì§€ë§‰ ì‹œì²­ ìœ„ì¹˜ ê¸°ì–µ
- [ ] ì ‘ê·¼ ë“±ê¸‰ë³„ ë±ƒì§€ ì‹œê°ì  êµ¬ë¶„

### Phase 3: ì„±ëŠ¥ ìµœì í™”
- [ ] ì¸ë„¤ì¼ lazy loading
- [ ] ë¹„ë””ì˜¤ ëª©ë¡ í˜ì´ì§€ë„¤ì´ì…˜
- [ ] ì´ë¯¸ì§€ WebP ë³€í™˜

